{"ast":null,"code":"var _jsxFileName = \"/Users/benrowe/Development/Flatiron/comeback/4mod/project/survey-app/src/components/SurveyPage.js\";\nimport React, { useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport * as Survey from 'survey-react';\nimport 'survey-react/survey.css';\nconst responseURL = 'http://localhost:3000/question_responses';\n\nfunction SurveyPage({\n  openSurvey,\n  setOpenSurvey\n}) {\n  const {\n    survey_questions\n  } = openSurvey;\n  const json = {\n    title: `${openSurvey.title}`,\n    pages: [{\n      name: 'Page 1',\n      elements: [{\n        name: `${openSurvey.id}`,\n        elements: []\n      }]\n    }]\n  };\n\n  const makeModel = () => {\n    survey_questions.forEach(question => {\n      return {\n        title: `${openSurvey.title}`,\n        pages: [{\n          name: 'Page 1',\n          elements: [{\n            name: `${openSurvey.id}`,\n            elements: []\n          }]\n        }]\n      };\n      console.log('uE loop hits');\n      panel.addNewQuestion({\n        name: `${question.id}`,\n        title: `${question.content}`,\n        isRequired: true,\n        questionType: 'radiogroup'\n      });\n    });\n  };\n\n  const survey = new Survey.Model(json);\n  const panel = survey.getPanelByName(`${openSurvey.id}`); // useEffect(() => {\n  //         console.log('panel', panel)\n  //         console.log('useEffect hits')\n  //         console.log('questions', survey_questions)\n  //         survey_questions.forEach(question => {\n  //             console.log('uE loop hits')\n  //             panel.addNewQuestion({\n  //                 name: `${question.id}`,\n  //                 title: `${question.content}`,\n  //                 isRequired: true,\n  //                 questionType: 'radiogroup'\n  //             })\n  //         })\n  // })\n\n  const collectAnswers = () => {\n    return survey_questions.map(question => {\n      return survey.getValue(`${question.id}`);\n    });\n  };\n\n  const submitAnswers = event => {\n    event.preventDefault();\n    console.log('collected answers', collectAnswers());\n    fetch(responseURL, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(collectAnswers())\n    });\n    setOpenSurvey({});\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Survey.Survey, {\n    model: survey,\n    onComplete: submitAnswers,\n    questionsOnPageMode: \"singlePage\",\n    mode: \"display\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 26\n    }\n  }, \"Cancel\")));\n}\n\nexport default SurveyPage;","map":{"version":3,"sources":["/Users/benrowe/Development/Flatiron/comeback/4mod/project/survey-app/src/components/SurveyPage.js"],"names":["React","useEffect","Link","Survey","responseURL","SurveyPage","openSurvey","setOpenSurvey","survey_questions","json","title","pages","name","elements","id","makeModel","forEach","question","console","log","panel","addNewQuestion","content","isRequired","questionType","survey","Model","getPanelByName","collectAnswers","map","getValue","submitAnswers","event","preventDefault","fetch","method","headers","body","JSON","stringify"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport * as Survey from 'survey-react'\nimport 'survey-react/survey.css'\n\nconst responseURL = 'http://localhost:3000/question_responses'\n\nfunction SurveyPage({ openSurvey, setOpenSurvey }) {\n\n    const { survey_questions } = openSurvey\n\n    const json = {\n        title: `${openSurvey.title}`,\n        pages: [\n            { name: 'Page 1', elements: [\n                { name: `${openSurvey.id}`, elements: [] }\n            ] }\n        ]\n    }\n\n    const makeModel = () => {\n        survey_questions.forEach(question => {\n            return (\n                { title: `${openSurvey.title}`,\n                pages: [\n                    { name: 'Page 1', elements: [{ name: `${openSurvey.id}`, elements: [] }]\n                    }\n                ]\n                }\n            )\n            \n            \n            console.log('uE loop hits')\n            panel.addNewQuestion({\n                name: `${question.id}`,\n                title: `${question.content}`,\n                isRequired: true,\n                questionType: 'radiogroup'\n            })\n        })\n    }\n    \n    const survey = new Survey.Model(json)\n    const panel = survey.getPanelByName(`${openSurvey.id}`)\n    \n    // useEffect(() => {\n    //         console.log('panel', panel)\n    //         console.log('useEffect hits')\n    //         console.log('questions', survey_questions)\n    //         survey_questions.forEach(question => {\n    //             console.log('uE loop hits')\n    //             panel.addNewQuestion({\n    //                 name: `${question.id}`,\n    //                 title: `${question.content}`,\n    //                 isRequired: true,\n    //                 questionType: 'radiogroup'\n    //             })\n    //         })\n    // })\n\n    const collectAnswers = () => {\n        return survey_questions.map(question => {\n            return survey.getValue(`${question.id}`)\n        })\n    }\n    \n    const submitAnswers = (event) => {\n        event.preventDefault()\n        \n        console.log('collected answers', collectAnswers())\n\n        fetch(responseURL, {\n            method: 'POST',\n            headers: {'Content-Type': 'application/json'},\n            body: JSON.stringify(collectAnswers())\n        })\n        setOpenSurvey({})\n    }\n    \n    \n    return (\n        <div>\n            <Survey.Survey\n                model={survey}\n                onComplete={submitAnswers}\n                questionsOnPageMode='singlePage'\n                mode='display'\n            />\n            <br/>\n            <Link to='/'><button>Cancel</button></Link>\n        </div>\n    )\n}\n\nexport default SurveyPage\n"]},"metadata":{},"sourceType":"module"}