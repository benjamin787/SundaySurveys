{"ast":null,"code":"var _jsxFileName = \"/Users/benrowe/Development/Flatiron/comeback/4mod/project/survey-app/src/components/SurveyPage.js\";\nimport React, { useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport * as Survey from 'survey-react';\nimport 'survey-react/survey.css';\nconst responseURL = 'http://localhost:3000/question_responses';\n\nfunction SurveyPage({\n  openSurvey,\n  setOpenSurvey\n}) {\n  const {\n    survey_questions\n  } = openSurvey;\n\n  const makeQuestions = () => {\n    return survey_questions.map(question => {\n      return {\n        name: `${question.id}`,\n        title: `${question.content}`,\n        isRequired: true,\n        type: 'radiogroup'\n      };\n    });\n  };\n\n  const makeJSON = () => {\n    return {\n      title: `${openSurvey.title}`,\n      // name: `${openSurvey.id}`,\n      elements: JSON.stringify(makeQuestions())\n    };\n  };\n\n  console.log('json', JSON.stringify(makeQuestions()));\n  const survey = new Survey.Model(makeJSON());\n  console.log('survey', survey);\n\n  const collectAnswers = () => {\n    let answerStorage = [];\n    survey_questions.forEach(question => {\n      answerStorage.push(survey.getValue(`${question.id}`));\n    });\n    return answerStorage;\n  };\n\n  const submitAnswers = event => {\n    event.preventDefault();\n    fetch(responseURL, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(collectAnswers())\n    });\n    setOpenSurvey({});\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Survey.Survey, {\n    model: survey,\n    onComplete: submitAnswers,\n    questionsOnPageMode: \"singlePage\",\n    navigateToUrl: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 26\n    }\n  }, \"Cancel\")));\n}\n\nexport default SurveyPage;","map":{"version":3,"sources":["/Users/benrowe/Development/Flatiron/comeback/4mod/project/survey-app/src/components/SurveyPage.js"],"names":["React","useEffect","Link","Survey","responseURL","SurveyPage","openSurvey","setOpenSurvey","survey_questions","makeQuestions","map","question","name","id","title","content","isRequired","type","makeJSON","elements","JSON","stringify","console","log","survey","Model","collectAnswers","answerStorage","forEach","push","getValue","submitAnswers","event","preventDefault","fetch","method","headers","body"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAO,KAAKC,MAAZ,MAAwB,cAAxB;AACA,OAAO,yBAAP;AAEA,MAAMC,WAAW,GAAG,0CAApB;;AAEA,SAASC,UAAT,CAAoB;AAAEC,EAAAA,UAAF;AAAcC,EAAAA;AAAd,CAApB,EAAmD;AAE/C,QAAM;AAAEC,IAAAA;AAAF,MAAuBF,UAA7B;;AAEA,QAAMG,aAAa,GAAG,MAAM;AACxB,WAAOD,gBAAgB,CAACE,GAAjB,CAAqBC,QAAQ,IAAI;AACpC,aACI;AAAEC,QAAAA,IAAI,EAAG,GAAED,QAAQ,CAACE,EAAG,EAAvB;AACAC,QAAAA,KAAK,EAAG,GAAEH,QAAQ,CAACI,OAAQ,EAD3B;AAEAC,QAAAA,UAAU,EAAE,IAFZ;AAGAC,QAAAA,IAAI,EAAE;AAHN,OADJ;AAOH,KARM,CAAP;AASH,GAVD;;AAYA,QAAMC,QAAQ,GAAG,MAAM;AACnB,WACI;AAAEJ,MAAAA,KAAK,EAAG,GAAER,UAAU,CAACQ,KAAM,EAA7B;AACI;AACAK,MAAAA,QAAQ,EAAEC,IAAI,CAACC,SAAL,CAAeZ,aAAa,EAA5B;AAFd,KADJ;AAMH,GAPD;;AASAa,EAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBH,IAAI,CAACC,SAAL,CAAeZ,aAAa,EAA5B,CAApB;AAEA,QAAMe,MAAM,GAAG,IAAIrB,MAAM,CAACsB,KAAX,CAAiBP,QAAQ,EAAzB,CAAf;AACAI,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBC,MAAtB;;AAEA,QAAME,cAAc,GAAG,MAAM;AACzB,QAAIC,aAAa,GAAG,EAApB;AACAnB,IAAAA,gBAAgB,CAACoB,OAAjB,CAAyBjB,QAAQ,IAAI;AACjCgB,MAAAA,aAAa,CAACE,IAAd,CAAmBL,MAAM,CAACM,QAAP,CAAiB,GAAEnB,QAAQ,CAACE,EAAG,EAA/B,CAAnB;AACH,KAFD;AAGA,WAAOc,aAAP;AACH,GAND;;AAQA,QAAMI,aAAa,GAAIC,KAAD,IAAW;AAC7BA,IAAAA,KAAK,CAACC,cAAN;AAEAC,IAAAA,KAAK,CAAC9B,WAAD,EAAc;AACf+B,MAAAA,MAAM,EAAE,MADO;AAEfC,MAAAA,OAAO,EAAE;AAAC,wBAAgB;AAAjB,OAFM;AAGfC,MAAAA,IAAI,EAAEjB,IAAI,CAACC,SAAL,CAAeK,cAAc,EAA7B;AAHS,KAAd,CAAL;AAKAnB,IAAAA,aAAa,CAAC,EAAD,CAAb;AACH,GATD;;AAYA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,MAAD,CAAQ,MAAR;AACI,IAAA,KAAK,EAAEiB,MADX;AAEI,IAAA,UAAU,EAAEO,aAFhB;AAGI,IAAA,mBAAmB,EAAC,YAHxB;AAII,IAAA,aAAa,EAAC,GAJlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAOI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPJ,eAQI,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAC,GAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAb,CARJ,CADJ;AAYH;;AAED,eAAe1B,UAAf","sourcesContent":["import React, { useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport * as Survey from 'survey-react'\nimport 'survey-react/survey.css'\n\nconst responseURL = 'http://localhost:3000/question_responses'\n\nfunction SurveyPage({ openSurvey, setOpenSurvey }) {\n\n    const { survey_questions } = openSurvey\n\n    const makeQuestions = () => {\n        return survey_questions.map(question => {\n            return (\n                { name: `${question.id}`,\n                title: `${question.content}`,\n                isRequired: true,\n                type: 'radiogroup',\n                }\n            )\n        })\n    }\n\n    const makeJSON = () => {\n        return (\n            { title: `${openSurvey.title}`,\n                // name: `${openSurvey.id}`,\n                elements: JSON.stringify(makeQuestions())\n            }\n        )\n    }\n\n    console.log('json', JSON.stringify(makeQuestions()))\n    \n    const survey = new Survey.Model(makeJSON())\n    console.log('survey', survey)\n\n    const collectAnswers = () => {\n        let answerStorage = []\n        survey_questions.forEach(question => {\n            answerStorage.push(survey.getValue(`${question.id}`))\n        })\n        return answerStorage\n    }\n    \n    const submitAnswers = (event) => {\n        event.preventDefault()\n\n        fetch(responseURL, {\n            method: 'POST',\n            headers: {'Content-Type': 'application/json'},\n            body: JSON.stringify(collectAnswers())\n        })\n        setOpenSurvey({})\n    }\n    \n    \n    return (\n        <div>\n            <Survey.Survey\n                model={survey}\n                onComplete={submitAnswers}\n                questionsOnPageMode='singlePage'\n                navigateToUrl='/'\n            />\n            <br/>\n            <Link to='/'><button>Cancel</button></Link>\n        </div>\n    )\n}\n\nexport default SurveyPage\n"]},"metadata":{},"sourceType":"module"}