{"ast":null,"code":"var _jsxFileName = \"/Users/benrowe/Development/Flatiron/comeback/4mod/project/survey-app/src/components/SurveyPage.js\";\nimport React, { useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport * as Survey from 'survey-react';\nimport 'survey-react/survey.css';\nconst responseURL = 'http://localhost:3000/question_responses';\n\nfunction SurveyPage({\n  openSurvey,\n  setOpenSurvey,\n  routerProps\n}) {\n  const {\n    survey_questions\n  } = openSurvey;\n\n  const makeQuestions = () => {\n    return survey_questions.map(question => {\n      return {\n        name: `${question.id}`,\n        title: `${question.content}`,\n        isRequired: true,\n        type: 'radiogroup',\n        choices: [1, 2, 3, 4]\n      };\n    });\n  };\n\n  const makeJSON = () => {\n    return {\n      title: openSurvey.title,\n      type: 'survey',\n      elements: makeQuestions()\n    };\n  };\n\n  const survey = new Survey.Model(makeJSON());\n  console.log('survey', survey); // const collectAnswers = () => {\n  //     let answerStorage = []\n  //     survey_questions.forEach(question => {\n  //         answerStorage.push(question.id: survey.getValue(question.id))\n  //     })\n  //     return answerStorage\n  // }\n\n  const submitAnswers = (form, event) => {\n    event.preventDefault();\n    console.log(form);\n    fetch(responseURL, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(form) // body: JSON.stringify(collectAnswers())\n\n    });\n    setOpenSurvey({});\n  };\n\n  const handleForm = e;\n\n  const displaySurvey = () => {\n    return /*#__PURE__*/React.createElement(Survey.Survey, {\n      key: openSurvey.id,\n      model: survey,\n      onComplete: submitAnswers,\n      questionsOnPageMode: \"singlePage\",\n      navigateToUrl: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 13\n      }\n    });\n  };\n\n  console.log(displaySurvey());\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, openSurvey === {} ? routerProps.history.push('/') : displaySurvey(), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 26\n    }\n  }, \"Cancel\")));\n}\n\nexport default SurveyPage;","map":{"version":3,"sources":["/Users/benrowe/Development/Flatiron/comeback/4mod/project/survey-app/src/components/SurveyPage.js"],"names":["React","useEffect","Link","Survey","responseURL","SurveyPage","openSurvey","setOpenSurvey","routerProps","survey_questions","makeQuestions","map","question","name","id","title","content","isRequired","type","choices","makeJSON","elements","survey","Model","console","log","submitAnswers","form","event","preventDefault","fetch","method","headers","body","JSON","stringify","handleForm","e","displaySurvey","history","push"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAO,KAAKC,MAAZ,MAAwB,cAAxB;AACA,OAAO,yBAAP;AAEA,MAAMC,WAAW,GAAG,0CAApB;;AAEA,SAASC,UAAT,CAAoB;AAAEC,EAAAA,UAAF;AAAcC,EAAAA,aAAd;AAA6BC,EAAAA;AAA7B,CAApB,EAAgE;AAE5D,QAAM;AAAEC,IAAAA;AAAF,MAAuBH,UAA7B;;AAGA,QAAMI,aAAa,GAAG,MAAM;AACxB,WAAOD,gBAAgB,CAACE,GAAjB,CAAqBC,QAAQ,IAAI;AACpC,aACI;AAAEC,QAAAA,IAAI,EAAG,GAAED,QAAQ,CAACE,EAAG,EAAvB;AACAC,QAAAA,KAAK,EAAG,GAAEH,QAAQ,CAACI,OAAQ,EAD3B;AAEAC,QAAAA,UAAU,EAAE,IAFZ;AAGAC,QAAAA,IAAI,EAAE,YAHN;AAIAC,QAAAA,OAAO,EAAE,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,EAAO,CAAP;AAJT,OADJ;AAQH,KATM,CAAP;AAUH,GAXD;;AAaA,QAAMC,QAAQ,GAAG,MAAM;AACnB,WAAS;AACLL,MAAAA,KAAK,EAAET,UAAU,CAACS,KADb;AAELG,MAAAA,IAAI,EAAE,QAFD;AAGLG,MAAAA,QAAQ,EAAEX,aAAa;AAHlB,KAAT;AAKH,GAND;;AAQA,QAAMY,MAAM,GAAG,IAAInB,MAAM,CAACoB,KAAX,CAAiBH,QAAQ,EAAzB,CAAf;AAEAI,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBH,MAAtB,EA5B4D,CA8B5D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAMI,aAAa,GAAG,CAACC,IAAD,EAAOC,KAAP,KAAiB;AACnCA,IAAAA,KAAK,CAACC,cAAN;AACAL,IAAAA,OAAO,CAACC,GAAR,CAAYE,IAAZ;AACAG,IAAAA,KAAK,CAAC1B,WAAD,EAAc;AACf2B,MAAAA,MAAM,EAAE,MADO;AAEfC,MAAAA,OAAO,EAAE;AAAC,wBAAgB;AAAjB,OAFM;AAGfC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeR,IAAf,CAHS,CAIf;;AAJe,KAAd,CAAL;AAMApB,IAAAA,aAAa,CAAC,EAAD,CAAb;AACH,GAVD;;AAYA,QAAM6B,UAAU,GAAIC,CAApB;;AAEA,QAAMC,aAAa,GAAG,MAAM;AACxB,wBACI,oBAAC,MAAD,CAAQ,MAAR;AACI,MAAA,GAAG,EAAEhC,UAAU,CAACQ,EADpB;AAEI,MAAA,KAAK,EAAEQ,MAFX;AAGI,MAAA,UAAU,EAAEI,aAHhB;AAII,MAAA,mBAAmB,EAAC,YAJxB;AAKI,MAAA,aAAa,EAAC,GALlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ;AAUH,GAXD;;AAaAF,EAAAA,OAAO,CAACC,GAAR,CAAYa,aAAa,EAAzB;AAEA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACMhC,UAAU,KAAK,EAAf,GACIE,WAAW,CAAC+B,OAAZ,CAAoBC,IAApB,CAAyB,GAAzB,CADJ,GAEIF,aAAa,EAHvB,eAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALJ,eAMI,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAC,GAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAb,CANJ,CADJ;AAUH;;AAED,eAAejC,UAAf","sourcesContent":["import React, { useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport * as Survey from 'survey-react'\nimport 'survey-react/survey.css'\n\nconst responseURL = 'http://localhost:3000/question_responses'\n\nfunction SurveyPage({ openSurvey, setOpenSurvey, routerProps }) {\n\n    const { survey_questions } = openSurvey\n\n\n    const makeQuestions = () => {\n        return survey_questions.map(question => {\n            return (\n                { name: `${question.id}`,\n                title: `${question.content}`,\n                isRequired: true,\n                type: 'radiogroup',\n                choices: [1,2,3,4]\n                }\n            )\n        })\n    }\n\n    const makeJSON = () => {\n        return ( {\n            title: openSurvey.title,\n            type: 'survey',\n            elements: makeQuestions()\n        })\n    }\n    \n    const survey = new Survey.Model(makeJSON())\n\n    console.log('survey', survey)\n\n    // const collectAnswers = () => {\n    //     let answerStorage = []\n    //     survey_questions.forEach(question => {\n    //         answerStorage.push(question.id: survey.getValue(question.id))\n    //     })\n    //     return answerStorage\n    // }\n    \n    const submitAnswers = (form, event) => {\n        event.preventDefault()\n        console.log(form)\n        fetch(responseURL, {\n            method: 'POST',\n            headers: {'Content-Type': 'application/json'},\n            body: JSON.stringify(form)\n            // body: JSON.stringify(collectAnswers())\n        })\n        setOpenSurvey({})\n    }\n\n    const handleForm = (e)\n    \n    const displaySurvey = () => {\n        return ( \n            <Survey.Survey\n                key={openSurvey.id}\n                model={survey}\n                onComplete={submitAnswers}\n                questionsOnPageMode='singlePage'\n                navigateToUrl='/'\n\n            />\n        )\n    }\n\n    console.log(displaySurvey())\n    \n    return (\n        <div>\n            { openSurvey === {}\n                ? routerProps.history.push('/')\n                : displaySurvey()\n            }\n            <br/>\n            <Link to='/'><button>Cancel</button></Link>\n        </div>\n    )\n}\n\nexport default SurveyPage\n"]},"metadata":{},"sourceType":"module"}